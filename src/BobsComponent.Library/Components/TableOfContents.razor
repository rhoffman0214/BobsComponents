@* Table of Contents Component for Page Navigation *@

<div class="table-of-contents @(IsSticky ? "sticky" : "")">
    <div class="toc-header" @onclick="ToggleCollapse">
        <h3>@Title</h3>
        <button class="toggle-btn" aria-label="@(isCollapsed ? "Expand menu" : "Collapse menu")" type="button">
            <span class="toggle-icon @(isCollapsed ? "collapsed" : "expanded")">â–¼</span>
        </button>
    </div>

    <nav class="toc-nav @(isCollapsed ? "collapsed" : "")" aria-label="Page navigation">
        <ul class="toc-list">
            @foreach (var item in Items)
            {
                <li class="toc-item level-@item.Level">
                    <a href="#@item.Id">@item.Text</a>
                </li>
            }
        </ul>
    </nav>
</div>

@code {
    [Parameter] public List<TocItem> Items { get; set; } = new();
    [Parameter] public string? Title { get; set; } = "On This Page";
    [Parameter] public bool IsSticky { get; set; } = true;

    private bool isCollapsed = false;

    private void ToggleCollapse()
    {
        isCollapsed = !isCollapsed;
    }

    public class TocItem
    {
        public required string Id { get; set; }        // Section anchor ID
        public required string Text { get; set; }      // Display text
        public int Level { get; set; } = 1;           // Heading level (1-3 for future)
    }
}
